services:
  app:
    build: .
    container_name: research-assistant-app
    ports:
      - "8501:8501"
    environment:
      - GROQ_API_KEY=${GROQ_API_KEY}
      - ENDEE_API_URL=http://endee:8080/api/v1  # Internal Docker network URL
    depends_on:
      - endee
    volumes:
      - .:/app  # Live reload for development
      - /app/venv  # Prevent local venv from overriding container
    restart: unless-stopped

  endee:
    image: endeeio/endee-server:latest
    container_name: endee-server
    ports:
      - "8080:8080"
    environment:
      NDD_NUM_THREADS: 0
      NDD_AUTH_TOKEN: ""
    volumes:
      - endee-data:/data
    restart: unless-stopped

volumes:
  endee-data:
